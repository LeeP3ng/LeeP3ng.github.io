---
title: 2019å¹´æœ«æ€»ç»“
date: 2019-12-31
updated:
categories:
- document
tags:
- document
excerpt_separator: <!--more-->
---

## å†™åœ¨å‰é¢

ä¸€è½¬çœ¼ï¼Œ2019å¹´é©¬ä¸Šå°±è¿‡å®Œäº†ã€‚å›é¡¾2019ï¼Œä¸ªäººè§‰å¾—è¿˜æ˜¯æ”¶è·é¢‡ä¸°ã€‚ä¹°äº†å¥½å‡ æœ¬å‰ç«¯ç›¸å…³çš„ä¹¦ç±ï¼Œå¤¯å®åŸºç¡€çš„åŒæ—¶ï¼Œä¹Ÿé€æ¸å¼€å§‹äº†è§£å‰ç«¯æ¶æ„æ–¹é¢çš„çŸ¥è¯†ã€‚å­¦ä¹ äº†æ›´å¤šçš„å‰ç«¯æŠ€æœ¯ï¼Œä¹Ÿç†Ÿæ‚‰äº†å¦‚ä½•ä½¿ç”¨Vue + Node.jså¼€å‘é¡¹ç›®ã€‚

å›æƒ³äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚èƒ½ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ€»ç»“ä¸€ä¸‹è¿™ä¸€å¹´çš„æ”¶è·ï¼š

<!--more-->

## é˜…è¯»ä¹¦ç±

2019å¹´ä¹°äº†å››æœ¬ä¹¦ï¼Œåªçœ‹å®Œäº†å…¶ä¸­ä¸¤æœ¬ã€‚ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹åªçœ‹äº†å…¶ä¸­çš„â€œå¼‚æ­¥I/Oâ€å’Œâ€œå†…å­˜æ§åˆ¶â€è¿™ä¸¤éƒ¨åˆ†ã€‚

- [x] ã€ŠVue.jsæƒå¨æŒ‡å—ã€‹

- [x] ã€Šæ·±å…¥ç†è§£ES6ã€‹

- [ ] ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹

- [ ] ã€Šé«˜æ•ˆå‰ç«¯:Webé«˜æ•ˆç¼–ç¨‹ä¸ä¼˜åŒ–å®è·µã€‹

## æŠ€èƒ½æå‡

### Vue

ä¸€ç›´åœ¨ç”¨Vue-cli2.0è„šæ‰‹æ¶è¿›è¡Œé¡¹ç›®å¼€å‘ï¼Œä¸‹åŠå¹´çš„æ—¶å€™åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨Vue-cli3.0æ­å»ºé¡¹ç›®ã€‚ï¼ˆå¹´æœ«çš„æ—¶å€™å‘ç°Vue-cli4.0éƒ½å·²ç»å‘å¸ƒäº†ğŸ˜…æ‰¾ä¸ªæœºä¼šè¦ä½“éªŒä¸€ä¸‹ï¼‰

å¯¹æ¯”äº†ä¸€ä¸ªVue-cli2.0å’ŒVue-cli3.0çš„é¡¹ç›®æ–‡ä»¶ç»“æ„ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒVue-cli3.0ç”Ÿæˆçš„é¡¹ç›®æ–‡ä»¶æ›´åŠ è½»ä¾¿ï¼Œè€Œä¸”Vue-cli3.0ä¼šè‡ªåŠ¨ä¸‹è½½node_modulesä¾èµ–åŒ…ã€‚

#### Vue-cli2.0ç›®å½•ç»“æ„

```javascript
|-- build                           // é¡¹ç›®æ„å»º(webpack)ç›¸å…³ä»£ç 
| |-- build.js                      // ç”Ÿäº§ç¯å¢ƒæ„å»ºä»£ç 
| |-- check-version.js              // æ£€æŸ¥nodeã€npmç­‰ç‰ˆæœ¬
| |-- utils.js                      // æ„å»ºå·¥å…·ç›¸å…³
| |-- vue-loader.conf.js            // webpack loaderé…ç½®
| |-- webpack.base.conf.js          // webpackåŸºç¡€é…ç½®
| |-- webpack.dev.conf.js           // webpackå¼€å‘ç¯å¢ƒé…ç½®,æ„å»ºå¼€å‘æœ¬åœ°æœåŠ¡å™¨
| |-- webpack.prod.conf.js          // webpackç”Ÿäº§ç¯å¢ƒé…ç½®
|-- config                          // é¡¹ç›®å¼€å‘ç¯å¢ƒé…ç½®
| |-- dev.env.js                    // å¼€å‘ç¯å¢ƒå˜é‡
| |-- index.js                      // é¡¹ç›®ä¸€äº›é…ç½®å˜é‡
| |-- prod.env.js                   // ç”Ÿäº§ç¯å¢ƒå˜é‡
| |-- test.env.js                   // æµ‹è¯•ç¯å¢ƒå˜é‡
|-- src                             // æºç ç›®å½•
| |-- components                    // vueå…¬å…±ç»„ä»¶
| |-- router                        // vueçš„è·¯ç”±ç®¡ç†
| |-- App.vue                       // é¡µé¢å…¥å£æ–‡ä»¶
| |-- main.js                       // ç¨‹åºå…¥å£æ–‡ä»¶ï¼ŒåŠ è½½å„ç§å…¬å…±ç»„ä»¶
|-- static                          // é™æ€æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸€äº›å›¾ç‰‡ï¼Œjsonæ•°æ®ç­‰
|-- test                            // æµ‹è¯•æ–‡ä»¶
| |-- e2e                           // e2eæµ‹è¯•é…ç½®
| |-- unit                          // å•å…ƒæµ‹è¯•é…ç½®
|-- .babelrc                        // ES6è¯­æ³•ç¼–è¯‘é…ç½®
|-- .editorconfig                   // å®šä¹‰ä»£ç æ ¼å¼
|-- .gitignore                      // gitä¸Šä¼ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶æ ¼å¼
|-- .postcsssrc.js                  // postcssé…ç½®æ–‡ä»¶
|-- index.html                      // å…¥å£é¡µé¢
|-- package.json                    // é¡¹ç›®åŸºæœ¬ä¿¡æ¯,åŒ…ä¾èµ–ä¿¡æ¯ç­‰
|-- README.md                       // é¡¹ç›®è¯´æ˜
```

#### Vue-cli3.0ç›®å½•ç»“æ„

```javascript
|-- node_modules              // ä¾èµ–åŒ…
|-- public                    // é¡¹ç›®åŸºç¡€æ–‡ä»¶
| |-- favicon.icon            // iconå›¾æ ‡
| |-- index.html              // å…¥å£é¡µé¢
|-- src                       // æºç ç›®å½•
| |-- assets                  // å¼•å…¥æ–‡ä»¶
| |-- components              // vueå…¬å…±ç»„ä»¶
| |-- router                  // vueçš„è·¯ç”±ç®¡ç†
| |-- store                   // vueçš„çŠ¶æ€ç®¡ç†
| |-- views                   // å…·ä½“é¡µé¢
| |-- App.vue                 // é¡µé¢å…¥å£æ–‡ä»¶
| |-- main.js                 // ç¨‹åºå…¥å£æ–‡ä»¶ï¼ŒåŠ è½½å„ç§å…¬å…±ç»„ä»¶
|-- .gitignore                // gitä¸Šä¼ éœ€è¦å¿½ç•¥çš„æ–‡ä»¶æ ¼å¼
|-- babel.config.js           // babelé…ç½®
|-- package-lock.json         // è®°å½•å½“å‰çŠ¶æ€ä¸‹å®é™…å®‰è£…çš„å„ä¸ªnpm packageçš„å…·ä½“æ¥æºå’Œç‰ˆæœ¬å·
|-- package.json              // é¡¹ç›®åŸºæœ¬ä¿¡æ¯,åŒ…ä¾èµ–ä¿¡æ¯ç­‰
|-- README.md                 // é¡¹ç›®è¯´æ˜
|-- vue.config.js             // é¡¹ç›®åŸºæœ¬é…ç½®
```

### Node.js

æŠ½ç©ºçœ‹äº†ä¸€ä¸‹Node.jséƒ¨åˆ†æŠ€æœ¯ï¼Œä½†ä¸€ç›´æ²¡æœ‰åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿‡ã€‚å¯¹å…¶ä¸­çš„æ–‡ä»¶ç³»ç»Ÿè¿˜æ˜¯æ¯”è¾ƒæ„Ÿå…´è¶£çš„ï¼Œç§ä¸‹æ’¸äº†ä¸€ä¸ªè¯»å–æ•°æ®åº“å¹¶æŠŠè¯»å–çš„æ•°æ®å†™å…¥æ–‡ä»¶å†…çš„demoï¼š

```javascript
const PORT = 8089;
var http = require("http"); //å¼•å…¥httpæ¨¡å—
var mysql = require("mysql"); //å¼•å…¥mysqlæ¨¡å—
var fs = require("fs"); //å¼•å…¥fsæ¨¡å—

var textRlt = null
// è¿æ¥æ•°æ®åº“
var connection = mysql.createConnection({
  host: "127.0.0.1",
  user: "root",
  password: "root",
  database: "test"
});

connection.connect();

connection.query("SELECT * FROM sc_user where user_name like '%a%'", function(error, results, fields) {
  if (error) throw error;
  fs.writeFileSync("./text.json", JSON.stringify(results));
  textRlt = fs.readFileSync("./text.json", 'utf-8');
});

http.createServer(function(request, response) {
    // å‘é€ HTTP å¤´éƒ¨
    // HTTP çŠ¶æ€å€¼: 200 : OK
    // å†…å®¹ç±»å‹: text/plain
    response.writeHead(200, { "Content-Type": "text/plain" });
    response.end(textRlt);
  })
  .listen(PORT);
console.log("Server running at http://127.0.0.1:" + PORT + "/");
```

### è„šæœ¬

è‡ªä»ç¬¬ä¸€æ¬¡å†™è¿‡è„šæœ¬ä¹‹åï¼Œå°±è¶Šå‘å–œæ¬¢ç”¨è„šæœ¬è§£å†³ä¸€äº›é‡å¤ä¸”æ¯”è¾ƒè€—æ—¶çš„äº‹æƒ…ã€‚æ¯”å¦‚è‡ªå·±åˆ†åˆ«å†™äº†ä¸€ä¸ªé¡¹ç›®è‡ªåŠ¨æ‰“åŒ…éƒ¨ç½²ï¼ˆ_deploy.shï¼‰å’Œè‡ªåŠ¨æ›´æ–°ä»£ç ï¼ˆ_update.shï¼‰çš„è„šæœ¬ï¼Œè™½ç„¶å¾ˆç®€å•ï¼Œä½†å¾ˆå®ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å·¥ä½œé‡å¤§çš„æ—¶å€™ï¼Œæ‰§è¡Œä¸€ä¸‹è„šæœ¬å°±å¯ä»¥è®©ç¨‹åºè‡ªå·±è¿è¡Œäº†ï¼š

ä½¿ç”¨æ–¹æ³•ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ`./_deploy.sh`ï¼Œå› ä¸ºæœ¬åœ°å’ŒæœåŠ¡å™¨ç›´æ¥åŠ äº†å…å¯†ç™»å½•ï¼Œæ‰€æœ‰æ— éœ€è¾“å…¥å¯†ç 

```bash
#!/bin/bash

# æ‰“åŒ…
npm run build

if [ $? -eq 0 ]; then
  echo "-------------------------------------------- build succeeded --------------------------------------------"
  # éƒ¨ç½²åˆ°æœåŠ¡å™¨
  ssh em@192.168.70.195 'rm -rf /var/www/tushen.com/html/static/' && ssh em@192.168.70.195 'rm -rf /var/www/tushen.com/html/index.html' && scp -r ./dist/* em@192.168.70.195:/var/www/tushen.com/html/ && scp -r ./static/excel/* em@192.168.70.195:/var/www/tushen.com/html/excel/

  if [ $? -eq 0 ]; then
    echo "-------------------------------------------- deploy-70.195 succeeded --------------------------------------------"
  else
    echo "-------------------------------------------- deploy-70.195 failed --------------------------------------------"
  fi
else
  echo "-------------------------------------------- build failed --------------------------------------------"
fi

```

ä½¿ç”¨æ–¹æ³•ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ`./_update.sh 'æè¿°ä¿¡æ¯'`

```bash
#!/bin/bash

#æ›´æ–°ä»£ç 
git add .

git commit -m $1

git pull --rebase origin develop

if [ $? -eq 0 ]; then
  echo "-------------------------------------------- Code pull succeeded --------------------------------------------"
  git push origin develop
  if [ $? -eq 0 ]; then
    echo "-------------------------------------------- Code push succeeded --------------------------------------------"
  else
    echo "-------------------------------------------- Code push failed --------------------------------------------"
  fi
else
  echo "-------------------------------------------- Code pull failed --------------------------------------------"
fi

```

### æ•°æ®åº“

ä¸äº†è§£æ•°æ®åº“çš„å‰ç«¯ä¸æ˜¯å¥½å‰ç«¯ï¼Œ2019å¹´ï¼Œæ•°æ®åº“çš„æ“ä½œæ›´åŠ ç†Ÿç»ƒï¼Œä¹Ÿé€æ¸ä¼šå†™ä¸€äº›æ¯”è¾ƒå¤æ‚çš„sqlè¯­å¥ã€‚è¯·æ•™å¹¶å­¦ä¹ äº†æ›´å¤šçš„æ•°æ®åº“çŸ¥è¯†ï¼Œæ¯”å¦‚æ•°æ®å†—ä½™ã€DBAã€äº‹åŠ¡ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚


## æ€»ç»“

2019å¹´å¬è¿‡æœ€å–œæ¬¢çš„ä¸€å¥è¯å°±æ˜¯**æ”¯ä»˜å®æ€»è£è‹—äººå‡¤**è¯´è¿‡çš„ï¼š**â€œä¸è¦ç»™è‡ªå·±è®¾é™ï¼Œå–œæ¬¢å†™ä»£ç ï¼Œå°±äº«å—å†™ä»£ç çš„æ„Ÿè§‰å’Œå¿«ä¹â€**ã€‚

å¤§å››å®ä¹ çš„æ—¶å€™é€‰æ‹©äº†å‰ç«¯è¿™æ¡è·¯ï¼Œä»ä¸€å¼€å§‹çš„è¿·èŒ«ï¼Œåšäº‹æƒ…æ²¡æœ‰å¤´ç»ªï¼Œåˆ°åæ¥å¤šäººåˆä½œåšå‡ºä¸€ä¸ªé¡¹ç›®æ—¶çš„å–œæ‚¦ï¼Œå†åˆ°ç°åœ¨é¡¹ç›®å¼€å‘æ—¶çš„å¾—å¿ƒåº”æ‰‹ã€‚

ä¸€æ­¥ä¸€æ­¥ï¼Œå¯¹å‰ç«¯çš„çƒ­çˆ±ä¹Ÿè¶Šæ¥è¶Šæ·±ã€‚2019å¹´çš„ä»˜å‡ºéƒ½æœ‰æ”¶è·ï¼Œå¸Œæœ›åœ¨2020å¹´èƒ½æ›´è¿›ä¸€æ­¥ã€‚
